## mako
<%namespace name='static' file='static_content.html'/>
<%!
    from django.utils.translation import ugettext as _
    from django.core.urlresolvers import reverse
    import datetime
    import pytz

    PK_TIMEZONE = pytz.timezone('Asia/Karachi')
%>
    <%block name="js_extra">
        <script type="text/javascript" src="${static.url('js/jquery.countdown.min.js')}"></script>
    </%block>
    <%page args="course" expression_filter="h"/>
    <article class="course" id="${course.id}" role="region" aria-label="${course.display_name_with_default}">
        <a href="/login">
            <header class="course-image">
                <div class="cover-image">
                    <img src="${course.course_image_url}" alt="${course.display_name_with_default} ${course.display_number_with_default}" />
                    <div class="learn-more" aria-hidden=true>${_("LEARN MORE")}</div>
                </div>
            </header>
            <div class="course-info" aria-hidden="true">
                <h2 class="course-name">
                    <span class="course-organization">${course.display_org_with_default}
                        <span class="course-date pull-right" aria-hidden="true">
                            <% time_zone = PK_TIMEZONE %>
                             % if course.has_ended():
                                ${_("Ended - {end_date}").format(end_date=course.end_datetime_text("SHORT_DATE", time_zone))}
                             % elif course.has_started():
                                ${_("Started - {start_date}").format(start_date=course.start_datetime_text("SHORT_DATE", time_zone))}
                             % elif course.start_date_is_still_default: # Course start date TBD
                                ${_("Coming Soon")}
                             % else:
                                <i class="fa fa-clock-o" aria-hidden="true"></i>
                                 <p style="display:inline" id="starts-in"></p>
                             % endif
                        </span>
                    </span>
                    <span class="course-title">${course.display_name}</span>
                    <a href="/login" class="btn btn-brand">Enroll</a>
                </h2>

            </div>
            <div class="sr">
                <ul>
                    <li>${course.display_org_with_default}</li>
                    <li>${course.display_name}</li>
                    <li>${_("Starts")}: <time itemprop="startDate" datetime="${course.start_datetime_text()}">${course.start_datetime_text()}</time></li>
                </ul>
            </div>
        </a>
    </article>
    <script type="text/javascript">
          $("#starts-in")
              .countdown("${course.start.astimezone(PK_TIMEZONE).strftime('%Y/%m/%d %H:%M:%S')}", function(event) {
                $(this).text(
                  event.strftime('Test starts in %D days %H hours and %M minutes')
                );
          });
    </script>